---
import Countdown from "../components/Countdown.jsx";
import QuoteTicker from "../components/QuoteTicker.jsx";
import "../styles/global.css";

const targetDate = "2025-02-14T17:00:00";
const quittingMessage = "Legg tastaturet frå meg klokka 17, så kan dokke ringa nokon andre.";
const sarcasticNotes = [
  "Faen ska dokke gjør da",
  "Snart ferige med opptaket nå da?",
  "Px er bedre enn rem",
  "Sendt nettsidå te odda nå da?",
  "Trent da?",
];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nedtelling te avgang, om dokke orke å sjå på</title>
  </head>
  <body>
    <main class="page">
      <section class="hero">
        <div class="hero-top">
          <p class="eyebrow">Te dokke som aldri e heilt ferdige</p>
          <button class="theme-toggle" type="button" data-theme-toggle>
            Bytt tema, om du må
          </button>
        </div>
        <h1>Nedtelling te eg stikke, sidan dokke spør</h1>
        <p class="subhead">
          {quittingMessage}
          <span class="spark">✨</span>
        </p>
      </section>

      <section class="countdown-panel">
        <Countdown client:load targetDate={targetDate} />
      </section>

      <section class="ticker-panel">
        <h2>Små påminningar, så dokke ikkje gløyme alt</h2>
        <QuoteTicker client:load notes={sarcasticNotes} />
      </section>

      <section class="footer">
        <p>
          Lagt på Netlify så dokke kan stirra på klokka etter eg e vekke.
        </p>
      </section>
    </main>
  </body>
  <script>
    const root = document.documentElement;
    const toggle = document.querySelector("[data-theme-toggle]");
    const storedTheme = localStorage.getItem("theme");
    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    const defaultTheme = storedTheme ?? (prefersDark ? "dark" : "light");

    root.dataset.theme = defaultTheme;

    const updateLabel = () => {
      const next = root.dataset.theme === "dark" ? "lyst, tydelegvis" : "mørkt, sjølvsagt";
      toggle.textContent = `Bytt til ${next}`;
      toggle.setAttribute("aria-pressed", root.dataset.theme === "dark");
    };

    updateLabel();

    toggle.addEventListener("click", () => {
      root.dataset.theme = root.dataset.theme === "dark" ? "light" : "dark";
      localStorage.setItem("theme", root.dataset.theme);
      updateLabel();
    });
  </script>
</html>
